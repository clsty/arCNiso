---
const { title } = Astro.props.frontmatter || Astro.props;
---
<style is:global>
/* 自动编号样式（基于 starlight 的结构）
   说明要点：
   - 计数器在 .sl-markdown-content 容器上初始化；
   - 每个 heading 块由 .sl-heading-wrapper.level-hX 包裹，因此把 counter-increment / counter-reset 放在 wrapper 上，
     再在实际的 h1/h2/h3/h4 元素上使用 ::before 显示编号；
   - 排除页面的顶级 metadata 标题（id 为 _top 的 h1）以及侧栏的 “On this page” 标题（id 为 starlight__on-thispage）。
*/

/* 初始化一级计数器（从 0 开始） */
.sl-markdown-content {
  counter-reset: ch1 0;
}

/* h1 wrapper：遇到新的 h1 增加一级计数并重置二级计数 */
.sl-markdown-content .sl-heading-wrapper.level-h1 {
  counter-increment: ch1;
  counter-reset: ch2;
}

/* 显示 h1 编号（排除 metadata 主标题 #_top） */
.sl-markdown-content h1:not(#_top)::before {
  content: counter(ch1) "  ";
}

/* h2 wrapper：遇到新的 h2 增加二级计数并重置三级计数 */
.sl-markdown-content .sl-heading-wrapper.level-h2 {
  counter-increment: ch2;
  counter-reset: ch3;
}

/* 显示 h2 编号（排除侧栏标题 #starlight__on-thispage） */
.sl-markdown-content h2:not(#starlight__on-thispage)::before {
  content: counter(ch1) "." counter(ch2) "  ";
}

/* h3 wrapper：遇到新的 h3 增加三级计数并重置四级计数 */
.sl-markdown-content .sl-heading-wrapper.level-h3 {
  counter-increment: ch3;
  counter-reset: ch4;
}

/* 显示 h3 编号 */
.sl-markdown-content h3::before {
  content: counter(ch1) "." counter(ch2) "." counter(ch3) "  ";
}

/* h4 wrapper：遇到新的 h4 增加四级计数 */
.sl-markdown-content .sl-heading-wrapper.level-h4 {
  counter-increment: ch4;
}

/* 显示 h4 编号 */
.sl-markdown-content h4::before {
  content: counter(ch1) "." counter(ch2) "." counter(ch3) "." counter(ch4) "  ";
}

/* 小的视觉调整：编号与标题间距 */
.sl-markdown-content h1::before,
.sl-markdown-content h2::before,
.sl-markdown-content h3::before,
.sl-markdown-content h4::before {
  display: inline-block;
  margin-right: 0.5rem;
  font-weight: 600;
}
</style>

<slot />
